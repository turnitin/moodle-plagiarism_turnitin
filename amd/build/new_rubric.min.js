define(["jquery","core/templates","core/modal","core/modal_events","plagiarism_turnitin/modal_rubric_manager_launch","plagiarism_turnitin/modal_rubric_view_launch","plagiarism_turnitin/eula_event_listener"],function(a,e,t,r,o,c,d){return{newRubric:function(){var n=this;a(".rubric_manager_launch").on("click",function(){var e=a(this).data("courseid"),i=a(this).data("cmid");n.rubricCreateModal(o,e,i)}),a(document).off("click",".rubric_view"),a(document).on("click",".rubric_view",function(){var e=a(this).data("courseid"),i=a(this).data("cmid");n.rubricCreateModal(c,e,i).then(function(e){n.hideModalByEvent(e)})}),a("#id_plagiarism_rubric").mousedown(function(){""!=a('input[name="instance"]').val()&&"Y"!=a('input[name="rubric_warning_seen"]').val()&&confirm(M.str.plagiarism_turnitin.changerubricwarning)&&a('input[name="rubric_warning_seen"]').val("Y")}),0<a("#id_plagiarism_rubric").length&&o.refreshRubricSelect()},rubricCreateModal:function(e,i,n){return t.create({type:e.TYPE,template:e.TEMPLATE,templateContext:{courseid:i,cmid:n,wwwroot:M.cfg.wwwroot},large:!0}).then(function(e){return e.show(),e.getRoot().find(".modal").addClass("tii_pp_modal_rubric"),e.getRoot().find(".modal-content").addClass("tii_pp_modal_rubric_content"),e.getRoot().on(r.hidden,function(){setTimeout(function(){0<a("#id_plagiarism_rubric").length&&o.refreshRubricSelect()},1500)}),d.attach(),e})},handleCloseModalMessage:function(e){var i=this;"CloseRubricsView"===e.data.type&&(i.modal.hide(),window.removeEventListener("message",i.handleCloseModalMessage.bind(i)))},hideModalByEvent:function(e){var i=this;i.modal=e,window.addEventListener("message",i.handleCloseModalMessage.bind(i))}}});
//# sourceMappingURL=new_rubric.min.js.map